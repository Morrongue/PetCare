<!-- templates/includes/sidebar.html -->
<div id="sidebar" class="w-64 bg-gradient-to-b from-dark-800 to-dark-900 text-white
     transition-transform duration-300 ease-in-out fixed inset-y-0 left-0 shadow-2xl border-r border-dark-700
     lg:translate-x-0 -translate-x-full z-20 flex flex-col overflow-hidden">
  
  <!-- Logo y título COMPACTO (fijo arriba) -->
  <div class="text-center p-4 border-b border-dark-700 flex-shrink-0">
    <div class="w-14 h-14 mx-auto mb-2 bg-olive-700 rounded-full flex items-center justify-center shadow-lg">
      <i class="fas fa-paw text-2xl text-white"></i>
    </div>
    <h2 class="text-xl font-bold text-olive-400">PetCare</h2>
    <p class="text-xs text-gray-400 mt-0.5">Veterinary System</p>
  </div>

  <!-- Navegación COMPACTA (área scrolleable) -->
  <nav class="flex-1 overflow-y-auto overflow-x-hidden px-4 py-3 space-y-1.5">
    
    <!-- Dashboard -->
    <a href="{% url 'index' %}" 
       class="group flex items-center space-x-2.5 px-3 py-2.5 rounded-lg text-sm
              hover:bg-olive-700 transition-all duration-300 
              {% if request.path == '/' %}bg-olive-700 shadow-lg{% endif %}">
      <i class="fas fa-chart-line text-olive-400 group-hover:text-white w-4 flex-shrink-0"></i>
      <span class="font-medium group-hover:translate-x-1 transition-transform truncate">Dashboard</span>
    </a>

    <!-- My Pets -->
    <a href="{% url 'list_pacientes' %}" 
       class="group flex items-center space-x-2.5 px-3 py-2.5 rounded-lg text-sm
              hover:bg-olive-700 transition-all duration-300
              {% if 'patients' in request.path %}bg-olive-700 shadow-lg{% endif %}">
      <i class="fas fa-dog text-olive-400 group-hover:text-white w-4 flex-shrink-0"></i>
      <span class="font-medium group-hover:translate-x-1 transition-transform truncate">My Pets</span>
    </a>

    <!-- Medical History -->
    <a href="{% url 'list_historias' %}" 
       class="group flex items-center space-x-2.5 px-3 py-2.5 rounded-lg text-sm
              hover:bg-olive-700 transition-all duration-300
              {% if 'medical-history' in request.path %}bg-olive-700 shadow-lg{% endif %}">
      <i class="fas fa-file-medical text-olive-400 group-hover:text-white w-4 flex-shrink-0"></i>
      <span class="font-medium group-hover:translate-x-1 transition-transform truncate">Medical History</span>
    </a>

    {% if rol == 'Administrador' %}
      <!-- Separador COMPACTO -->
      <div class="pt-3 pb-1.5">
        <p class="text-xs text-gray-500 uppercase tracking-wider px-3 truncate">Admin</p>
      </div>

      <!-- Veterinarians -->
      <a href="{% url 'list_veterinarios' %}" 
         class="group flex items-center space-x-2.5 px-3 py-2.5 rounded-lg text-sm
                hover:bg-olive-700 transition-all duration-300
                {% if 'vets' in request.path %}bg-olive-700 shadow-lg{% endif %}">
        <i class="fas fa-user-md text-olive-400 group-hover:text-white w-4 flex-shrink-0"></i>
        <span class="font-medium group-hover:translate-x-1 transition-transform truncate">Veterinarians</span>
      </a>

      <!-- Users -->
      <a href="{% url 'admin_users_list' %}" 
         class="group flex items-center space-x-2.5 px-3 py-2.5 rounded-lg text-sm
                hover:bg-olive-700 transition-all duration-300
                {% if 'panel/users' in request.path %}bg-olive-700 shadow-lg{% endif %}">
        <i class="fas fa-users text-olive-400 group-hover:text-white w-4 flex-shrink-0"></i>
        <span class="font-medium group-hover:translate-x-1 transition-transform truncate">Manage Users</span>
      </a>

      <!-- Appointments -->
      <a href="{% url 'list_citas' %}" 
         class="group flex items-center space-x-2.5 px-3 py-2.5 rounded-lg text-sm
                hover:bg-olive-700 transition-all duration-300
                {% if 'appointments' in request.path %}bg-olive-700 shadow-lg{% endif %}">
        <i class="fas fa-calendar-check text-olive-400 group-hover:text-white w-4 flex-shrink-0"></i>
        <span class="font-medium group-hover:translate-x-1 transition-transform truncate">Appointments</span>
      </a>

      <!-- Reports -->
      <a href="{% url 'reports' %}" 
         class="group flex items-center space-x-2.5 px-3 py-2.5 rounded-lg text-sm
                hover:bg-olive-700 transition-all duration-300
                {% if 'reports' in request.path %}bg-olive-700 shadow-lg{% endif %}">
        <i class="fas fa-chart-bar text-olive-400 group-hover:text-white w-4 flex-shrink-0"></i>
        <span class="font-medium group-hover:translate-x-1 transition-transform truncate">Reports</span>
      </a>

    {% elif rol == 'Veterinario' %}
      <!-- Separador COMPACTO -->
      <div class="pt-3 pb-1.5">
        <p class="text-xs text-gray-500 uppercase tracking-wider px-3 truncate">Vet Tools</p>
      </div>

      <!-- Appointments -->
      <a href="{% url 'list_citas' %}" 
         class="group flex items-center space-x-2.5 px-3 py-2.5 rounded-lg text-sm
                hover:bg-olive-700 transition-all duration-300
                {% if 'appointments' in request.path %}bg-olive-700 shadow-lg{% endif %}">
        <i class="fas fa-calendar-alt text-olive-400 group-hover:text-white w-4 flex-shrink-0"></i>
        <span class="font-medium group-hover:translate-x-1 transition-transform truncate">My Appointments</span>
      </a>

      <!-- Reports -->
      <a href="{% url 'reports' %}" 
         class="group flex items-center space-x-2.5 px-3 py-2.5 rounded-lg text-sm
                hover:bg-olive-700 transition-all duration-300
                {% if 'reports' in request.path %}bg-olive-700 shadow-lg{% endif %}">
        <i class="fas fa-chart-bar text-olive-400 group-hover:text-white w-4 flex-shrink-0"></i>
        <span class="font-medium group-hover:translate-x-1 transition-transform truncate">Reports</span>
      </a>

    {% elif rol == 'Cliente' %}
      <!-- Separador COMPACTO -->
      <div class="pt-3 pb-1.5">
        <p class="text-xs text-gray-500 uppercase tracking-wider px-3 truncate">Services</p>
      </div>

      <!-- Appointments -->
      <a href="{% url 'list_citas' %}" 
         class="group flex items-center space-x-2.5 px-3 py-2.5 rounded-lg text-sm
                hover:bg-olive-700 transition-all duration-300
                {% if 'appointments' in request.path %}bg-olive-700 shadow-lg{% endif %}">
        <i class="fas fa-calendar text-olive-400 group-hover:text-white w-4 flex-shrink-0"></i>
        <span class="font-medium group-hover:translate-x-1 transition-transform truncate">My Appointments</span>
      </a>
    {% endif %}

    <!-- Espaciado para que se vea el logout -->
    <div class="h-16"></div>

  </nav>

  <!-- Footer COMPACTO (fijo abajo) -->
  <div class="p-4 border-t border-dark-700 bg-dark-900 flex-shrink-0">
    <a href="{% url 'logout' %}" 
       class="group flex items-center space-x-2.5 px-3 py-2.5 rounded-lg text-sm
              bg-red-900/30 hover:bg-red-900 transition-all duration-300">
      <i class="fas fa-sign-out-alt text-red-400 group-hover:text-white w-4 flex-shrink-0"></i>
      <span class="font-medium text-red-300 group-hover:text-white group-hover:translate-x-1 transition-transform truncate">
        Logout
      </span>
    </a>
  </div>

</div>

<!-- Overlay para cerrar el sidebar en móvil -->
<div id="sidebar-overlay" 
     class="fixed inset-0 bg-black/50 z-10 lg:hidden hidden"
     onclick="document.getElementById('sidebar').classList.add('-translate-x-full'); this.classList.add('hidden');">
</div>

<script>
  // Mostrar overlay cuando el sidebar está abierto en móvil
  const sidebar = document.getElementById('sidebar');
  const overlay = document.getElementById('sidebar-overlay');
  
  const observer = new MutationObserver(() => {
    if (window.innerWidth < 1024) {
      if (!sidebar.classList.contains('-translate-x-full')) {
        overlay.classList.remove('hidden');
      } else {
        overlay.classList.add('hidden');
      }
    }
  });
  
  observer.observe(sidebar, { attributes: true, attributeFilter: ['class'] });
  
  // Cerrar sidebar al hacer click en un link (móvil)
  if (window.innerWidth < 1024) {
    const sidebarLinks = sidebar.querySelectorAll('a');
    sidebarLinks.forEach(link => {
      link.addEventListener('click', () => {
        sidebar.classList.add('-translate-x-full');
        overlay.classList.add('hidden');
      });
    });
  }
</script>

<!-- Estilos para scrollbar ULTRA DELGADO -->
<style>
  /* Scrollbar ultra delgado para navegación */
  nav::-webkit-scrollbar {
    width: 4px;
  }

  nav::-webkit-scrollbar-track {
    background: transparent;
  }

  nav::-webkit-scrollbar-thumb {
    background: #334155;
    border-radius: 2px;
  }

  nav::-webkit-scrollbar-thumb:hover {
    background: #6B8E23;
  }

  /* Para Firefox */
  nav {
    scrollbar-width: thin;
    scrollbar-color: #334155 transparent;
  }

  /* Smooth scroll */
  nav {
    scroll-behavior: smooth;
  }
</style>